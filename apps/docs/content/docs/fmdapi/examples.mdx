---
title: Examples
---

import { Callout } from "fumadocs-ui/components/callout";
import { Card, Cards } from "fumadocs-ui/components/card";

## Prerequisites

Before you can use any of these methods, you need to set up a FileMaker Data API client. If you haven't done this yet, check out our [Quick Start Guide](/docs/fmdapi/quick-start) to create your client in a separate file.

For these examples, we'll assume you have a client set up like this:

```ts title="lib/fmClient.ts"
// This is just an example - follow the Quick Start guide for your actual setup
import { CustomersLayout } from "./schema/client"; // Generated by typegen
```

---



# Retrieving Data from FileMaker

## Finding Records

You can use the `find` method to perform FileMaker-style find requests on a layout. This method is limited to 100 records by default, but you can use the `findAll` helper method to automatically paginate the results and return all records that match the query.


```ts twoslash title="searchCustomers.ts"
import { CustomersLayout } from "./CustomersLayout";
// ---cut---
// Simple search - find customers in a specific city (max 100 records)
export async function findCustomersByCity(city: string) {
  const response = await CustomersLayout.find({
    query: { city: city }
  });
  
  console.log(`Found ${response.data.length} customers in ${city}`);
  return response.data;
}

// Get ALL matching records at once (handles pagination automatically)
export async function getAllActiveCustomers() {
  const records = await CustomersLayout.findAll({
    query: { status: "==Active" } // all standard FileMaker operators are supported
  });
  
  return records;  // All active customers, no pagination needed
}
```

Use an array of find requests to get the OR behavior, equivalent to having multiple find requests in FileMaker.

```ts twoslash title="multipleFindRequests.ts"
import { CustomersLayout } from "./CustomersLayout";
// ---cut---
export async function getCustomersByCityOrStatus(city: string, status: string) {
  const records = await CustomersLayout.findAll({
    query: [{ city: "New York" }, { status: "Active" }]
  });
  
  return records;
}
```

There are also helper methods for common find scenarios:
- `findOne` will throw an error unless there is exactly one record found
- `findFirst` will return the first record found, but still throw if no records are found
- `maybeFindFirst` will return the first record found or null



## Getting All Records

If you don't need to specify any find requests, you can use the `list` or `listAll` methods. `list` will limit to 100 records per request by default, while `listAll` will automatically handle pagination via the API and return all records for the entire table. Use with caution if the table is large!


```ts twoslash title="getAllCustomers.ts"
import { CustomersLayout } from "./CustomersLayout";
// ---cut---
// Get a page of customers (recommended for large datasets)
export async function listCustomers() {
  const response = await CustomersLayout.list({
    sort: [{ fieldName: "firstName", sortOrder: "ascend" }]
  });
  
  return {
    customers: response.data,
    totalRecords: response.dataInfo.foundCount,
    hasMore: response.data.length === 100 // Default page size
  };
}

// Get ALL customers at once (use with caution on large datasets)
export async function listAllCustomers() {
  const records = await CustomersLayout.listAll();
  
  console.log(`Retrieved all ${records.length} customers`);
  
  return records.map(customer => ({
    id: customer.recordId,
    firstName: customer.fieldData.firstName,
    lastName: customer.fieldData.lastName,
    email: customer.fieldData.email,
    city: customer.fieldData.city
  }));
}
```

---

# Creating Records

Use `create` to add new records to your FileMaker database.

```ts twoslash title="createCustomer.ts"
import { CustomersLayout } from "./CustomersLayout";
// ---cut---
export async function createNewCustomer(customerData: {
  firstName: string;
  lastName: string;
  email: string;
  phone?: string;
  city?: string;
}) {
  const response = await CustomersLayout.create({
    fieldData: {
      firstName: customerData.firstName,
      lastName: customerData.lastName,
      email: customerData.email,
      phone: customerData.phone || "",
      city: customerData.city || "",
      status: "Active",
      created_date: new Date().toISOString()
    }
  });
  
  console.log(`Created customer with ID: ${response.recordId}`);
  return response.recordId;
}
```

---

# Update / Delete Records

Updating or deleting records requires the internal record id from FileMaker, not the primary key for your table. This value is returned in the `recordId` field of any create, list, or find response.

This record id *can* change during imports or data migrations, so you should never store it, but instead alwyas look it up via a find request when it's needed.

```ts twoslash title="updateCustomer.ts"
import { CustomersLayout } from "./CustomersLayout";
// ---cut---
export async function updateCustomerInfo(myPrimaryKey: string, updates: {
  firstName?: string;
  lastName?: string;
  phone?: string;
  city?: string;
}) {
  const { data: { recordId } } = await CustomersLayout.findOne({ query: { myPrimaryKey: myPrimaryKey } });

  // Only update fields that were provided
  const fieldData: any = {};
  if (updates.firstName) fieldData.firstName = updates.firstName;
  if (updates.lastName) fieldData.lastName = updates.lastName;
  if (updates.phone) fieldData.phone = updates.phone;
  if (updates.city) fieldData.city = updates.city;
  
  // Always update the modified date
  fieldData.updated_date = new Date().toISOString().split('T')[0];
  
  const response = await CustomersLayout.update({ fieldData, recordId });
  return response.modId;
}
```

```ts twoslash title="deleteCustomer.ts"
import { CustomersLayout } from "./CustomersLayout";
// ---cut---
export async function deleteCustomer(myPrimaryKey: string) {
  // Optional: Get customer info first for logging
  const { data: { recordId } } = await CustomersLayout.findOne({ query: { myPrimaryKey: myPrimaryKey } });

  await CustomersLayout.delete({recordId});
}
```

---

# Working with FileMaker Scripts

FileMaker scripts can be executed during your API operations or run independently.

## Running Scripts Independently

### Using `executeScript`

```ts title="executeScripts.ts"
// Run a script independently
export async function runCustomerCleanupScript() {
  const response = await CustomersLayout.executeScript("Customer Cleanup Script");
  console.log("Script result:", response.scriptResult);
  return response.scriptResult;
}

// Run a script with parameters
export async function sendWelcomeEmail(customerId: string) {
  const response = await CustomersLayout.executeScript(
    "Send Welcome Email",  // Script name
    customerId            // Script parameter
  );
  
  return response.scriptResult;
}
```

## Integrating Scripts with Data Operations

### Running Scripts During CRUD Operations

You can run scripts before or after any data operation:

```ts title="scriptsWithOperations.ts"
// Run a script when creating a record
export async function createCustomerWithWelcomeEmail(customerData: any) {
  const response = await CustomersLayout.create({
    fieldData: customerData,
    script: "Send Welcome Email",           // Script to run after create
    "script.param": customerData.email      // Parameter for the script
  });
  
  return {
    recordId: response.data.recordId,
    scriptResult: response.scriptResult
  };
}

// Run a script before and after an operation
export async function updateCustomerWithLogging(recordId: string, updates: any) {
  const response = await CustomersLayout.update(recordId, {
    fieldData: updates,
    "script.prerequest": "Log Update Start",     // Run before update
    "script.prerequest.param": recordId,        // Parameter for pre-script
    script: "Log Update Complete",              // Run after update
    "script.param": recordId                    // Parameter for post-script
  });
  
  return response.data.modId;
}

// Run a script when finding records
export async function findCustomersWithAuditLog(city: string) {
  const response = await CustomersLayout.find({
    query: { city: city },
    script: "Log Search Activity",
    "script.param": `city=${city}`
  });
  
  return response.data;
}
```

---

# Advanced Operations

## Session Management

### Working with Global Fields using `globals`

Set global field values for your FileMaker session:

```ts title="globals.ts"
export async function setUserContext(userId: string, userName: string) {
  await CustomersLayout.globals({
    "g_current_user_id": userId,
    "g_current_user_name": userName,
    "g_session_start": new Date().toISOString()
  });
  
  console.log(`Set global context for user: ${userName}`);
}
```


---
See also
<Cards>
  <Card title="Methods Reference" href="/docs/fmdapi/methods">Complete list of all available methods</Card>
  <Card title="Quick Start Guide" href="/docs/fmdapi/quick-start">Set up your FileMaker Data API client</Card>
</Cards>
