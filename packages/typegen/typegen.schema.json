{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "postGenerateCommand": {
      "description": "Optional CLI command to run after files are generated. Commonly used for formatting. Example: 'pnpm biome format --write .' or 'npx prettier --write src/'",
      "type": "string"
    },
    "config": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "$ref": "#/definitions/__schema0"
          }
        },
        {
          "$ref": "#/definitions/__schema0"
        }
      ]
    }
  },
  "required": [
    "config"
  ],
  "additionalProperties": false,
  "definitions": {
    "__schema0": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "fmdapi"
            },
            "configName": {
              "type": "string"
            },
            "envNames": {
              "$ref": "#/definitions/__schema1"
            },
            "layouts": {
              "default": [],
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "layoutName": {
                    "description": "The layout name from your FileMaker solution",
                    "type": "string"
                  },
                  "schemaName": {
                    "description": "A friendly name for the generated layout-specific client",
                    "type": "string"
                  },
                  "valueLists": {
                    "description": "If set to 'strict', the value lists will be validated to ensure that the values are correct. If set to 'allowEmpty', the value lists will be validated to ensure that the values are correct, but empty value lists will be allowed. If set to 'ignore', the value lists will not be validated and typed as `string`.",
                    "type": "string",
                    "enum": [
                      "strict",
                      "allowEmpty",
                      "ignore"
                    ]
                  },
                  "generateClient": {
                    "description": "If true, a layout-specific client will be generated (unless set to `false` at the top level)",
                    "type": "boolean"
                  },
                  "strictNumbers": {
                    "description": "If true, number fields will be typed as `number | null`. It's false by default because sometimes very large number will be returned as scientific notation via the Data API and therefore the type will be `number | string`.",
                    "type": "boolean"
                  }
                },
                "required": [
                  "layoutName",
                  "schemaName"
                ],
                "additionalProperties": false
              }
            },
            "path": {
              "$ref": "#/definitions/__schema2"
            },
            "clearOldFiles": {
              "$ref": "#/definitions/__schema3"
            },
            "validator": {
              "description": "If set to 'zod', 'zod/v4', or 'zod/v3', the validator will be generated using zod, otherwise it will generated Typescript types only and no runtime validation will be performed",
              "default": "zod/v4",
              "anyOf": [
                {
                  "type": "string",
                  "enum": [
                    "zod",
                    "zod/v4",
                    "zod/v3"
                  ]
                },
                {
                  "type": "boolean",
                  "const": false
                }
              ]
            },
            "clientSuffix": {
              "description": "The suffix to be added to the schema name for each layout",
              "default": "Layout",
              "type": "string"
            },
            "generateClient": {
              "description": "If true, a layout-specific client will be generated for each layout provided, otherwise it will only generate the types. This option can be overridden for each layout individually.",
              "default": true,
              "type": "boolean"
            },
            "webviewerScriptName": {
              "description": "The name of the webviewer script to be used. If this key is set, the generated client will use the @proofkit/webviewer adapter instead of the OttoFMS or Fetch adapter, which will only work when loaded inside of a FileMaker webviewer.",
              "type": "string"
            }
          },
          "required": [
            "type",
            "layouts"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "fmodata"
            },
            "configName": {
              "type": "string"
            },
            "envNames": {
              "allOf": [
                {
                  "$ref": "#/definitions/__schema1"
                }
              ]
            },
            "path": {
              "$ref": "#/definitions/__schema2"
            },
            "reduceMetadata": {
              "description": "If true, reduced OData annotations will be requested from the server to reduce payload size. This will prevent comments, entity ids, and other properties from being generated.",
              "type": "boolean"
            },
            "clearOldFiles": {
              "$ref": "#/definitions/__schema3"
            },
            "alwaysOverrideFieldNames": {
              "description": "If true (default), field names will always be updated to match metadata, even when matching by entity ID. If false, existing field names are preserved when matching by entity ID.",
              "default": true,
              "type": "boolean"
            },
            "tables": {
              "description": "Required array of tables to generate. Only the tables specified here will be downloaded and generated. Each table can have field-level overrides for excluding fields, renaming variables, and overriding field types.",
              "default": [],
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "tableName": {
                    "description": "The entity set name (table occurrence name) to generate. This table will be included in metadata download and type generation.",
                    "type": "string"
                  },
                  "variableName": {
                    "description": "Override the generated TypeScript variable name. The original entity set name is still used for the OData path.",
                    "type": "string"
                  },
                  "fields": {
                    "description": "Field-specific overrides as an array",
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "fieldName": {
                          "description": "The field name this override applies to",
                          "type": "string"
                        },
                        "exclude": {
                          "description": "If true, this field will be excluded from generation",
                          "type": "boolean"
                        },
                        "typeOverride": {
                          "description": "Override the inferred field type from metadata. Options: text, number, boolean, fmBooleanNumber, date, timestamp, container",
                          "type": "string",
                          "enum": [
                            "text",
                            "number",
                            "boolean",
                            "fmBooleanNumber",
                            "date",
                            "timestamp",
                            "container"
                          ]
                        }
                      },
                      "required": [
                        "fieldName"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "reduceMetadata": {
                    "description": "If undefined, the top-level setting will be used. If true, reduced OData annotations will be requested from the server to reduce payload size. This will prevent comments, entity ids, and other properties from being generated.",
                    "type": "boolean"
                  },
                  "alwaysOverrideFieldNames": {
                    "description": "If undefined, the top-level setting will be used. If true, field names will always be updated to match metadata, even when matching by entity ID. If false, existing field names are preserved when matching by entity ID.",
                    "type": "boolean"
                  },
                  "includeAllFieldsByDefault": {
                    "description": "If true, all fields will be included by default. If false, only fields that are explicitly listed in the `fields` array will be included.",
                    "type": "boolean"
                  }
                },
                "required": [
                  "tableName"
                ],
                "additionalProperties": false
              }
            },
            "includeAllFieldsByDefault": {
              "description": "If true, all fields will be included by default. If false, only fields that are explicitly listed in the `fields` array will be included.",
              "default": true,
              "type": "boolean"
            }
          },
          "required": [
            "type",
            "tables"
          ],
          "additionalProperties": false
        }
      ]
    },
    "__schema1": {
      "description": "If you're using other environment variables than the default, custom the NAMES of them here for the typegen to lookup their values when it runs.",
      "type": "object",
      "properties": {
        "server": {
          "type": "string"
        },
        "db": {
          "type": "string"
        },
        "auth": {
          "type": "object",
          "properties": {
            "apiKey": {
              "type": "string"
            },
            "username": {
              "type": "string"
            },
            "password": {
              "type": "string"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "__schema2": {
      "description": "The folder path to output the generated files",
      "default": "schema",
      "type": "string"
    },
    "__schema3": {
      "description": "If false, the path will not be cleared before the new files are written. Only the `client` and `generated` directories are cleared to allow for potential overrides to be kept.",
      "default": false,
      "type": "boolean"
    }
  }
}
