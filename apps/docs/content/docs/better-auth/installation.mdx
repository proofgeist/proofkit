---
title: Installation & Usage
---

import { Callout } from "fumadocs-ui/components/callout";

import { CliCommand } from "@/components/CliCommand";


<Callout type="warning">
This package is currently in beta. Please report any issues you find to the [GitHub repository](https://github.com/proofgeist/proofkit/issues), or reach out to us in the [Community](https://community.ottomatic.cloud/c/proofkit/13)
</Callout>

# Prerequisites
- Ensure OData is enabled on your FileMaker server.
- Ensure your credentials have the `fmodata` privilege enabled.
- If you are using OttoFMS 4.11+ and you want to use a Data API key instead of plain credentials, ensure OData is enabled for that key.

# Step 1a: Automated Setup with the ProofKit CLI
<Callout type="warning">
This automated setup expects you to have Next.js and shadcn/ui setup in your project. It will also setup various auth pages for you, but these may not work if you have a prefix configured for tailwindcss. You can use this opinionated setup to get you started, or if you need more control you should refer to the manual setup.
</Callout>

Run the following command to add the neccesary packages and config files to your project. You will not need to follow the better-auth installation guide.
<CliCommand command="add better-auth" exec />
 
# Step 1b: Manual Setup

Follow the [Better-Auth installation guide](https://better-auth.com/docs/installation) to get started in your app, but come back here for special instructions for anything related to your Database Setup or schema migrations.

### Database Setup

Ensure you have the @proofkit/better-auth package installed in your app.
```package-install
@proofkit/better-auth
```

Configure your database connection in your `auth.ts` file. Be sure to set these value secrets in your environment variables. The credentials you use here need `fmodata` permissions enabled, and read/write access to the better-auth tables.
```ts title="auth.ts"
import { betterAuth } from "better-auth";
import { FileMakerAdapter } from "@proofkit/better-auth";

export const auth = betterAuth({
  database: FileMakerAdapter({
    odata: {
      serverUrl: process.env.FM_SERVER_URL,
      auth: {
        // option 1: username/password credentials
        username: process.env.FM_USERNAME,
        password: process.env.FM_PASSWORD,

        // option 2: Data API key (OttoFMS 4.11+, OData enabled for the key)
        // apiKey: process.env.OTTO_API_KEY,
      },
      database: process.env.FM_DATABASE,
    },
  }),
  // ...rest of your config
});
```

# Step 2: Create/Update Database Tables

Run the following command to create the necessary tables and fields in your FileMaker file. It will show you a confirmation before any changes are applied, so you can review them.
<CliCommand command="migrate" exec execPackage="@proofkit/better-auth@latest" />

[Full Access] credentials are required for the schema changes to be applied automatically, but you may want to use a more restricted account for the rest of better-auth usage. If your credentials that you entered eariler in the `auth.ts` file do not have the [Full Access] permissions, you can override them in the CLI.
<CliCommand command={`migrate --username "full_access_username" --password "full_access_password"`} exec execPackage="@proofkit/better-auth@latest" />

These changes affect database schema only. No layouts or relationships are created or modified during this process.

The tables/fields that are created will be dependent on how your `auth.ts` file is setup. If you want to use any of your existing tables, just set [custom table names](https://www.better-auth.com/docs/concepts/database#custom-table-names) in the `auth.ts` file before running the migration command.

You may see fields added to your tables that you don't plan on using, but it's best to keep them in your database anyway to avoid potential errors.

<Callout type="info">
If you make any schema-related changes to the better-auth config, such as adding plugins, you will need to run the migration command again to apply the changes to your FileMaker file.
</Callout>
